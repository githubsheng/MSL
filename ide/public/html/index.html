<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="jquery/jquery.js"></script>
    <script src="../javascripts/ace/src/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="../javascripts/interpreter/bundle.js"></script>
    <script>
        let editor;

        function init(){
            editor = ace.edit("editor");
//            editor.setTheme("ace/theme/monokai");
            editor.$blockScrolling = Infinity;
        }

        function send(){
            const src = editor.getValue(); // or session.getValue
            const dataSend = {data: src};

            function sendFunc(data, returnAnswerCallback) {
                // console.log(data);
                returnAnswerCallback(null);
            }

            $.post("exec", dataSend, function(res){
                //todo: handle error messages.
                const interpreter = new Interpreter(res.commsStrs, res.strsConsts, sendFunc);
                window.interpreter = interpreter;
                interpreter.run();
            });
        }
    </script>
    <style type="text/css" media="screen">
        #editor {
            width: 800px;
            height: 600px;
        }
    </style>
</head>
<body onload="init()">
    <div id="editor"></div>
    <button onclick="send()">send</button>
</body>
</html>